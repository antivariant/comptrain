# üéπ CompTrain ‚Äì —Ç—Ä–µ–Ω–∞–∂—ë—Ä –∞–∫–∫–æ–º–ø–∞–Ω–µ–º–µ–Ω—Ç–Ω—ã—Ö —Ä–∏—Ç–º–æ–≤ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–π

**CompTrain** ‚Äî –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ –∞–∫–∫–æ–º–ø–∞–Ω–µ–º–µ–Ω—Ç–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –Ω–∞ –∫–ª–∞–≤–∏—à–Ω—ã—Ö (iOS, Android, Web, MacOS), –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ **DDD (Domain-Driven Design)** –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏ **MSC (Model-Service-Controller)** –Ω–∞ –±—ç–∫–µ–Ω–¥–µ.

---

## üì¶ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### üß† Backend (Node.js, Firebase Functions) ‚Äì MSC

```
functions/
‚îú‚îÄ‚îÄ controllers/          // üéÆ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã Firebase Functions
‚îÇ   ‚îú‚îÄ‚îÄ sequenceController.js          // GET /generateSequence
‚îÇ   ‚îú‚îÄ‚îÄ chordApplicatureController.js  // POST /generateApplicature
‚îÇ   ‚îî‚îÄ‚îÄ adminAddController.js          // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é
‚îú‚îÄ‚îÄ services/             // üß† –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ sequenceService.js             // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ –∏ —Ä–∏—Ç–º–∞
‚îÇ   ‚îî‚îÄ‚îÄ chordApplicatureService.js     // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–ø–ø–ª–∏–∫–∞—Ç—É—Ä –ø–æ –∞–∫–∫–æ—Ä–¥–∞–º
‚îú‚îÄ‚îÄ models/               // üíæ Firestore-–º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ progressionModel.js
‚îÇ   ‚îú‚îÄ‚îÄ rhythmModel.js
‚îÇ   ‚îî‚îÄ‚îÄ harmonyModel.js
‚îú‚îÄ‚îÄ index.js              // üöÄ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ firebase.json
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoint‚Äô—ã:

- **`GET /generateSequence`**  
  –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—é, —Ä–∏—Ç–º, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–∫–∫–æ—Ä–¥–æ–≤.

- **`POST /generateApplicature`**  
  –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∞–∫–∫–æ—Ä–¥–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–ø–ø–ª–∏–∫–∞—Ç—É—Ä (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ).

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
```bash
curl -X POST https://us-central1-comptrain-4ab99.cloudfunctions.net/generateApplicature \
  -H "Content-Type: application/json" \
  -d '{"chords": ["Em", "C", "G"]}'
```

---

## üì± Frontend (Flutter) ‚Äì DDD

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `lib/`:

```
lib/
‚îú‚îÄ‚îÄ domain/                  # üìê –ü—Ä–µ–¥–º–µ—Ç–Ω–∞—è –æ–±–ª–∞—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ models/              # üìÑ –ß–∏—Å—Ç—ã–µ –º–æ–¥–µ–ª–∏ (NoteMarker, Chord, Rhythm)
‚îÇ   ‚îú‚îÄ‚îÄ services/            # üß† Use-case –ª–æ–≥–∏–∫–∞ (chord_service.dart)
‚îÇ   ‚îî‚îÄ‚îÄ repositories/        # üß© –ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ API
‚îú‚îÄ‚îÄ infrastructure/          # üåê –†–µ–∞–ª–∏–∑–∞—Ü–∏—è API (Firebase)
‚îÇ   ‚îî‚îÄ‚îÄ firebase/
‚îÇ       ‚îú‚îÄ‚îÄ sequence_api.dart
‚îÇ       ‚îî‚îÄ‚îÄ chord_applicature_api.dart
‚îú‚îÄ‚îÄ application/             # üîÑ –°–≤—è–∑–∫–∞ domain –∏ infrastructure
‚îÇ   ‚îú‚îÄ‚îÄ use_cases/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ generate_sequence_use_case.dart
‚îÇ   ‚îî‚îÄ‚îÄ dtos/                # üì¶ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ presentation/            # üñºÔ∏è UI
‚îÇ   ‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ random_sequence_screen.dart
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ home_page.dart
‚îÇ   ‚îî‚îÄ‚îÄ widgets/
‚îÇ       ‚îú‚îÄ‚îÄ chord_keyboard_card.dart
‚îÇ       ‚îú‚îÄ‚îÄ chord_keyboard_row.dart
‚îÇ       ‚îú‚îÄ‚îÄ chord_keyboard_mini.dart
‚îÇ       ‚îú‚îÄ‚îÄ progression_card.dart
‚îÇ       ‚îú‚îÄ‚îÄ rhythm_card.dart
‚îÇ       ‚îî‚îÄ‚îÄ composition_examples.dart
‚îú‚îÄ‚îÄ shared/                  # üîß –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ —Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ theme/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ theme.dart
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ network_utils.dart
‚îÇ   ‚îî‚îÄ‚îÄ constants/
‚îÇ       ‚îî‚îÄ‚îÄ api_endpoints.dart
‚îî‚îÄ‚îÄ main.dart                # üèÅ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:

- `NoteMarker` ‚Äì –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏, —Å—Ç—É–ø–µ–Ω–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∞–≤–∏—à–∏.
- `ChordService` ‚Äì –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–ø–ø–ª–∏–∫–∞—Ç—É—Ä—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (–ø—Ä–∏ –æ—Ñ—Ñ–ª–∞–π–Ω–µ).
- `sequence_api.dart` ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ –∏ —Ä–∏—Ç–º–∞.
- `chord_applicature_api.dart` ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–ø–ø–ª–∏–∫–∞—Ç—É—Ä —Å –±—ç–∫–µ–Ω–¥–∞.
- `ChordKeyboardMini` ‚Äì –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∞–ø–ø–ª–∏–∫–∞—Ç—É—Ä—ã –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ.
- `ChordKeyboardCard` ‚Äì –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∞–∫–∫–æ—Ä–¥–æ–≤ –∏ –∫–ª–∞–≤–∏—à.
- `generate_sequence_use_case.dart` ‚Äì –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤—ã API + –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI.

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```dart
final result = await sequenceApi.getRandomSequence();
// –í–µ—Ä–Ω—ë—Ç: degrees, chords, progression, rhythm
```

### 2. –†–∞–∑–ª–æ–∂–µ–Ω–∏–µ –∞–∫–∫–æ—Ä–¥–æ–≤ –≤ –∞–ø–ø–ª–∏–∫–∞—Ç—É—Ä—É
```dart
final markers = await chordApi.getApplicature(['Em', 'C', 'G']);
// –í–µ—Ä–Ω—ë—Ç: —Å–ø–∏—Å–æ–∫ —Å–ø–∏—Å–∫–æ–≤ NoteMarker –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –∫–ª–∞–≤–∏—à–∞—Ö
```

---

## üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

- MIDI-—Ä–µ–∂–∏–º —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –ö–≤–∏–∑ –Ω–∞ —É–∑–Ω–∞–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–π –Ω–∞ —Å–ª—É—Ö
- –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Ä–∏—Ç–º–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å—É–Ω–∫–æ–≤
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –º–µ—Ç–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –Ω–∞–∂–∏–º–∞



---

## üìå –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –≤–µ—Ä—Å–∏—è–º

### üì¶ –§–æ—Ä–º–∞—Ç: `v<a>.<b>.<c>[-alpha|beta|rc]`

#### üî¢ –û—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è `a.b.c`

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–≤–∞–Ω–∏–µ   | –ó–Ω–∞—á–µ–Ω–∏–µ                                   | –ö–æ–≥–¥–∞ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å                                             |
|-----------|------------|---------------------------------------------|----------------------------------------------------------------|
| `a`       | **Major**  | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ, –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è         | –ò–∑–º–µ–Ω–µ–Ω–∏–µ API, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, UX/–ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã                    |
| `b`       | **Minor**  | –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è        | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏—á –±–µ–∑ –ø–æ–ª–æ–º–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏                        |
| `c`       | **Patch**  | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤, –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è | –ë–∞–≥—Ñ–∏–∫—Å—ã, –Ω–µ –≤–ª–∏—è—é—â–∏–µ –Ω–∞ API, –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  |

#### üî§ –ü—Ä–µ–¥—Ä–µ–ª–∏–∑–Ω—ã–µ —Ç–µ–≥–∏ `-alpha`, `-beta`, `-rc`

| –¢–µ–≥       | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                                  |
|-----------|---------------------------------------------|-----------------------------------------------------|
| `-alpha`  | –ß–µ—Ä–Ω–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è           | –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, proof of concept           |
| `-beta`   | –ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–∞, —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Ç–µ—Å—Ç–∞        | –≠—Ç–∞–ø QA –∏ early user testing                        |
| `-rc`     | Release candidate                           | –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º —Ä–µ–ª–∏–∑–æ–º         |

#### üí° –ü—Ä–∏–º–µ—Ä—ã –≤–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è          | –ó–Ω–∞—á–µ–Ω–∏–µ                                                              |
|-----------------|-----------------------------------------------------------------------|
| `v0.1.0`        | MVP                                                                   |
| `v0.1.1`        | –ë–∞–≥—Ñ–∏–∫—Å—ã –≤ MVP                                                        |
| `v0.2.0`        | –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–ª—É—Ö—É)             |
| `v0.2.1`        | –£–ª—É—á—à–µ–Ω–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã                                     |
| `v0.3.0-alpha`  | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏                                        |
| `v0.3.0-beta`   | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ                        |
| `v0.3.0-rc`     | –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–ª–∏–∑—É                                                       |
| `v1.0.0`        | –ü–µ—Ä–≤—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø—Ä–æ–¥-–≤—ã—Ö–æ–¥                                          |

#### üìÅ –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤–µ—Ä—Å–∏—è

- `backend/functions/package.json` ‚Üí `"version": "x.x.x"`
- `frontend/pubspec.yaml` ‚Üí `version: x.x.x+build`
- –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `.version` –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ (–¥–ª—è CI/CD)

---

## üìê –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `controllers/` ‚Äî —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `*Controller.js`
- `services/` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∏–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –≥–ª–∞–≥–æ–ª–∞ `get`, `generate`, `transpose`, `sequenceTo...`
- `models/` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `*Map.js`, `*List.js`, `*Model.js`
- `utils/` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `*.js`, –Ω–µ —Å–æ–∑–¥–∞—é—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### üìÑ JSDoc

–û–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –≤—Å–µ—Ö `services/` –∏ `controllers/`. –î–ª—è –º–æ–¥–µ–ª–µ–π –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ¬© 2025 ‚Äî [antivariant](https://github.com/antivariant)
