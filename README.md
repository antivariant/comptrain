# ğŸ¹ CompTrain â€“ Ñ‚Ñ€ĞµĞ½Ğ°Ğ¶Ñ‘Ñ€ Ğ°ĞºĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½ĞµĞ¼ĞµĞ½Ñ‚Ğ½Ñ‹Ñ… Ñ€Ğ¸Ñ‚Ğ¼Ğ¾Ğ² Ğ¸ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¸Ğ¹

**CompTrain** â€” ĞºÑ€Ğ¾ÑÑĞ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ĞµĞ½Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¾Ñ‚Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ°ĞºĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½ĞµĞ¼ĞµĞ½Ñ‚Ğ½Ñ‹Ñ… Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹ Ğ½Ğ° ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ½Ñ‹Ñ… (iOS, Android, Web, MacOS), Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ¾Ğµ Ğ½Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ **DDD (Domain-Driven Design)** Ğ½Ğ° Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğµ Ğ¸ **MSC (Model-Service-Controller)** Ğ½Ğ° Ğ±ÑĞºĞµĞ½Ğ´Ğµ.

---

## ğŸ“¦ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### ğŸ§  Backend (Node.js, Firebase Functions) â€“ MSC

```
functions/
â”œâ”€â”€ controllers/          // ğŸ® ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ñ‹ Firebase Functions
â”‚   â”œâ”€â”€ sequenceController.js          // GET /generateSequence
â”‚   â”œâ”€â”€ chordApplicatureController.js  // POST /generateApplicature
â”‚   â””â”€â”€ adminAddController.js          // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ
â”œâ”€â”€ services/             // ğŸ§  Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
â”‚   â”œâ”€â”€ sequenceService.js             // Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¸Ğ¸ Ğ¸ Ñ€Ğ¸Ñ‚Ğ¼Ğ°
â”‚   â””â”€â”€ chordApplicatureService.js     // Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ°Ğ¿Ğ¿Ğ»Ğ¸ĞºĞ°Ñ‚ÑƒÑ€ Ğ¿Ğ¾ Ğ°ĞºĞºĞ¾Ñ€Ğ´Ğ°Ğ¼
â”œâ”€â”€ models/               // ğŸ’¾ Firestore-Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”‚   â”œâ”€â”€ progressionModel.js
â”‚   â”œâ”€â”€ rhythmModel.js
â”‚   â””â”€â”€ harmonyModel.js
â”œâ”€â”€ index.js              // ğŸš€ ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
â”œâ”€â”€ package.json
â””â”€â”€ firebase.json
```

### Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ endpointâ€™Ñ‹:

- **`GET /generateSequence`**  
  Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½ÑƒÑ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¸Ñ, Ñ€Ğ¸Ñ‚Ğ¼, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ°ĞºĞºĞ¾Ñ€Ğ´Ğ¾Ğ².

- **`POST /generateApplicature`**  
  ĞŸÑ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ¼Ğ°ÑÑĞ¸Ğ² Ğ°ĞºĞºĞ¾Ñ€Ğ´Ğ¾Ğ² Ğ¸ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ°Ğ¿Ğ¿Ğ»Ğ¸ĞºĞ°Ñ‚ÑƒÑ€ (Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ° ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğµ).

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°:
```bash
curl -X POST https://us-central1-comptrain-4ab99.cloudfunctions.net/generateApplicature \
  -H "Content-Type: application/json" \
  -d '{"chords": ["Em", "C", "G"]}'
```

---

## ğŸ“± Frontend (Flutter) â€“ DDD

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° `lib/`:

```
lib/
â”œâ”€â”€ domain/                  # ğŸ“ ĞŸÑ€ĞµĞ´Ğ¼ĞµÑ‚Ğ½Ğ°Ñ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ
â”‚   â”œâ”€â”€ models/              # ğŸ“„ Ğ§Ğ¸ÑÑ‚Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (NoteMarker, Chord, Rhythm)
â”‚   â”œâ”€â”€ services/            # ğŸ§  Use-case Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (chord_service.dart)
â”‚   â””â”€â”€ repositories/        # ğŸ§© ĞĞ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº API
â”œâ”€â”€ infrastructure/          # ğŸŒ Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ API (Firebase)
â”‚   â””â”€â”€ firebase/
â”‚       â”œâ”€â”€ sequence_api.dart
â”‚       â””â”€â”€ chord_applicature_api.dart
â”œâ”€â”€ application/             # ğŸ”„ Ğ¡Ğ²ÑĞ·ĞºĞ° domain Ğ¸ infrastructure
â”‚   â”œâ”€â”€ use_cases/
â”‚   â”‚   â””â”€â”€ generate_sequence_use_case.dart
â”‚   â””â”€â”€ dtos/                # ğŸ“¦ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾) Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”œâ”€â”€ presentation/            # ğŸ–¼ï¸ UI
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â””â”€â”€ random_sequence_screen.dart
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ home_page.dart
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ chord_keyboard_card.dart
â”‚       â”œâ”€â”€ chord_keyboard_row.dart
â”‚       â”œâ”€â”€ chord_keyboard_mini.dart
â”‚       â”œâ”€â”€ progression_card.dart
â”‚       â”œâ”€â”€ rhythm_card.dart
â”‚       â””â”€â”€ composition_examples.dart
â”œâ”€â”€ shared/                  # ğŸ”§ ĞĞ±Ñ‰Ğ¸Ğµ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ğ¸ Ñ‚ĞµĞ¼Ğ°
â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â””â”€â”€ theme.dart
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ network_utils.dart
â”‚   â””â”€â”€ constants/
â”‚       â””â”€â”€ api_endpoints.dart
â””â”€â”€ main.dart                # ğŸ Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
```

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸:

- `NoteMarker` â€“ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸, ÑÑ‚ÑƒĞ¿ĞµĞ½Ğ¸ Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ¸.
- `ChordService` â€“ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ°Ğ¿Ğ¿Ğ»Ğ¸ĞºĞ°Ñ‚ÑƒÑ€Ñ‹ Ğ½Ğ° Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğµ (Ğ¿Ñ€Ğ¸ Ğ¾Ñ„Ñ„Ğ»Ğ°Ğ¹Ğ½Ğµ).
- `sequence_api.dart` â€“ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¸Ğ¸ Ğ¸ Ñ€Ğ¸Ñ‚Ğ¼Ğ°.
- `chord_applicature_api.dart` â€“ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ°Ğ¿Ğ¿Ğ»Ğ¸ĞºĞ°Ñ‚ÑƒÑ€ Ñ Ğ±ÑĞºĞµĞ½Ğ´Ğ°.
- `ChordKeyboardMini` â€“ Ğ¾Ñ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ° Ğ°Ğ¿Ğ¿Ğ»Ğ¸ĞºĞ°Ñ‚ÑƒÑ€Ñ‹ Ğ½Ğ° ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğµ.
- `ChordKeyboardCard` â€“ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ñ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒÑ Ğ°ĞºĞºĞ¾Ñ€Ğ´Ğ¾Ğ² Ğ¸ ĞºĞ»Ğ°Ğ²Ğ¸Ñˆ.
- `generate_sequence_use_case.dart` â€“ ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ñ‹ API + Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² UI.

---

## âœ… ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 1. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
```dart
final result = await sequenceApi.getRandomSequence();
// Ğ’ĞµÑ€Ğ½Ñ‘Ñ‚: degrees, chords, progression, rhythm
```

### 2. Ğ Ğ°Ğ·Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ°ĞºĞºĞ¾Ñ€Ğ´Ğ¾Ğ² Ğ² Ğ°Ğ¿Ğ¿Ğ»Ğ¸ĞºĞ°Ñ‚ÑƒÑ€Ñƒ
```dart
final markers = await chordApi.getApplicature(['Em', 'C', 'G']);
// Ğ’ĞµÑ€Ğ½Ñ‘Ñ‚: ÑĞ¿Ğ¸ÑĞ¾Ğº ÑĞ¿Ğ¸ÑĞºĞ¾Ğ² NoteMarker Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ° ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ°Ñ…
```

---

## ğŸš§ Ğ’ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ

- MIDI-Ñ€ĞµĞ¶Ğ¸Ğ¼ Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸ĞµĞ¼ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹
- ĞšĞ²Ğ¸Ğ· Ğ½Ğ° ÑƒĞ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¸Ğ¹ Ğ½Ğ° ÑĞ»ÑƒÑ…
- Ğ¢Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ñ€Ğ¸Ñ‚Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€Ğ¸ÑÑƒĞ½ĞºĞ¾Ğ²
- Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ Ğ¼ĞµÑ‚ĞºĞ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°

---

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT Â© 2025 â€” [antivariant](https://github.com/antivariant)
